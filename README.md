# WX
微信小程序，购房系统
### 了解微信小程序的框架结构
框架提供了自己的视图层描述语言 WXML 和 WXSS，以及基于 JavaScript 的逻辑层框架，并在视图层与逻辑层间提供了数据传输和事件系统，可以方便的聚焦于数据与逻辑上
### 响应的数据绑定
框架的核心是一个响应的数据绑定系统。
整个系统分为两块视图层（View）和逻辑层（App Service）
框架可以让数据与视图非常简单地保持同步。当做数据修改的时候，只需要在逻辑层修改数据，视图层就会做相应的更新。
### API框架
微信小程序有丰富的API框架，可以方便的调起微信提供的能力，如获取用户信息，本地存储，支付功能等。
## 重点 setData
setData 是小程序开发中使用最频繁的接口，也是最容易引发性能问题的接口。
#### setData错误类型
##### 频繁的去 setData
在我们分析过的一些案例里，部分小程序会非常频繁（毫秒级）的去setData，其导致了两个后果：
Android 下用户在滑动时会感觉到卡顿，操作反馈延迟严重，因为 JS 线程一直在编译执行渲染，未能及时将用户操作事件传递到逻辑层，逻辑层亦无法及时将操作处理结果及时传递到视图层；
渲染有出现延时，由于 WebView 的 JS 线程一直处于忙碌状态，逻辑层到页面层的通信耗时上升，视图层收到的数据消息时距离发出时间已经过去了几百毫秒，渲染的结果并不实时；
##### 每次 setData 都传递大量新数据
由setData的底层实现可知，我们的数据传输实际是一次 evaluateJavascript 脚本过程，当数据量过大时会增加脚本的编译执行时间，占用 WebView JS 线程，
#####  后台态页面进行 setData
当页面进入后台态（用户不可见），不应该继续去进行setData，后台态页面的渲染用户是无法感受的，另外后台态页面去setData也会抢占前台页面的执行。
##总结
熟练了解微信小程序，希望在以后的工作生活中能得到深化
